<!DOCTYPE html>
<html>
<!--
====================================================
    __  ____  ______________  _______ ___    __
   / / / /  |/  / ____/   \ \/ / ___//   |  / /
  / /_/ / /|_/ / /_  / /| |\  /\__ \/ /| | / /
 / __  / /  / / __/ / ___ |/ /___/ / ___ |/ /___
/_/ /_/_/  /_/_/   /_/  |_/_//____/_/  |_/_____/

====================================================
Owner Name: Hossain Mohammad Faysal
Profile: https://www.facebook.com/hmfaysal
Version: 1.1
Description: Awesome dude, awesome life
====================================================
-->
<head>
<meta charset="utf-8">
<title>Operator precedence in Ruby - Woman on Rails - web development from woman perspective</title>
<meta name="description" content="What do you need to know about order of mathematical operations and not only about them?">
<meta name="keywords" content="Ruby">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://womanonrails.com/images/womanonrails.jpg">
<meta name="twitter:title" content="Operator precedence in Ruby">
<meta name="twitter:description" content="What do you need to know about order of mathematical operations and not only about them?">
<meta name="twitter:creator" content="@womanonrails">

<!-- Open Graph -->
<meta property="og:locale" content="en">
<meta property="og:type" content="website">
<meta property="og:title" content="Operator precedence in Ruby">
<meta property="og:description" content="What do you need to know about order of mathematical operations and not only about them?">
<meta property="og:url" content="https://womanonrails.com/operator-precedence-ruby">
<meta property="og:site_name" content="Woman on Rails">
<meta property="og:image" content="https://womanonrails.com/images/womanonrails.jpg">

<!-- Icons -->
<!-- 16x16 -->
<link rel='shortcut icon' href="https://womanonrails.com/favicon.ico">
<!-- 32x32 -->
<link rel='shortcut icon' href="https://womanonrails.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel='apple-touch-icon-precomposed' href="https://womanonrails.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel='apple-touch-icon-precomposed' sizes='72x72' href="https://womanonrails.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel='apple-touch-icon-precomposed' sizes='114x114' href="https://womanonrails.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel='apple-touch-icon-precomposed' sizes='144x144' href="https://womanonrails.com/images/apple-touch-icon-144x144-precomposed.png">





<link rel="canonical" href="https://womanonrails.com/operator-precedence-ruby">
<link href="https://womanonrails.com/feed.xml" type="application/atom+xml" rel="alternate" title="Woman on Rails Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link rel="stylesheet" type="text/css" href="https://womanonrails.com/assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="https://womanonrails.com/assets/css/style.css" />
    <link rel="stylesheet" href="/css/main.css">

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search...">
        <i class="icon-remove-sign"></i>
        <ul class="search-results post-list"></ul><!-- /.search-results -->
    </div><!-- /.search-form -->
</div><!-- ./search-wrapper -->



</head>
<body class="post-template" itemscope itemtype="https://schema.org/WebPage">
<div id="fade"></div>
<a id="slide" class="animated fade"></a>
<aside id="sidebar">
  <nav id="navigation">
    <h2>MENU</h2>
    <hr>
    <ul>
      
        
          <li>
            
              <a href="https://womanonrails.com/">Home</a>
            
          </li>
        
          <li>
            
              <a href="https://womanonrails.com/categories">Categories</a>
            
          </li>
        
          <li>
            
              <a href="https://womanonrails.com/tags">Tags</a>
            
          </li>
        
          <li>
            
              <a href="https://womanonrails.com/about">About</a>
            
          </li>
        
      
      <li>
        <a href="https://womanonrails.com/feed.xml" title="Atom/RSS feed">
          <i class="icon-rss"></i> Feed
        </a>
      </li>
    </ul>
    </nav>
</aside>


<header id="masthead" class="blog-background overlay align-center align-middle animated from-bottom" itemscope itemtype="https://schema.org/Organization">


    <button class="menu-button animated fade dosearch" title="Search">
        <i class="icon-search"></i>
    </button>


  
  <a href="https://womanonrails.com/pl/operator-precedence-ruby" class='language animated fade'>
    pl
  </a>


    <div class="inner">
        <div class="container">
            
            <a class="brand" href="https://womanonrails.com/" role="banner" itemprop="url">
                <img itemprop="logo" src="https://womanonrails.com/images/womanonrails.jpg" alt="Woman on Rails Logo" />

            <h1 class="blog-title light" itemprop="name">
                Woman on Rails
            </h1>

            </a>
            <h2 class="blog-description light bordered bordered-top" itemprop="description">
                Premature optimization is the root of all evil.
            </h2>
        </div>
    </div>
    
    
    <div class="decor-wrapper">
        <svg id="header-decor" class="decor bottom" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path>
            <path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path>

            <path class="medium left" d="M0 100 L50 50 L0 33.3" fill="rgba(255,255,255, .3)"></path>
            <path class="medium right" d="M100 100 L50 50 L100 33.3" fill="rgba(255,255,255, .3)"></path>

            <path class="small left" d="M0 100 L50 50 L0 66.6" fill="rgba(255,255,255, .5)"></path>
            <path class="small right" d="M100 100 L50 50 L100 66.6" fill="rgba(255,255,255, .5)"></path>

            <path d="M0 99.9 L50 49.9 L100 99.9 L0 99.9" fill="rgba(255,255,255, 1)"></path>

            <path d="M48 52 L50 49 L52 52 L48 52" fill="rgba(255,255,255, 1)"></path>

        </svg>
    </div>
    
</header>

<div id="main" class="content" role="main" itemprop="mainContentOfPage" itemscope itemtype="https://schema.org/Blog">
    <div class="container">
        <div class="row">
            <article class="post col-md-8 col-md-offset-2 hentry" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
            
            
            
            
                    <header class="post-header entry-header">
                        
                        <h1 class="post-title text-center hyper lighter bordered-bottom entry-title" itemprop="headline">Operator precedence in Ruby</h1>
                        
                        <div class="cursive" style="color: #000; font-style:italic;">What do you need to know about order of mathematical operations and not only about them?</div>
                        <div class="post-info text-center small">
                            <span class="entry-date date published updated"><time datetime="2019-03-25T00:00:00-04:00" class="post-time" itemprop="datePublished">25 Mar 2019</time><span>
                            in <span class="post-tags"><a href="https://womanonrails.com/categories/index.html#programming" data-toggle="tooltip" title="Other posts from the Programming category" rel="tag">Programming</a></span>&nbsp;<span class="post-tags"><i class="icon-time"></i>&nbsp;<span class="time">11.27</span> minutes read</span>
                        </div>
                    </header>
                    <div class="post-body bordered-bottom" itemprop="description">
                        
                        <p>Order of math operations is very important in programming language. If you don&#39;t know it well, you can get completely different results, than you expect. And your code can be just wrong. You need to know the rules. Is the order similar like in math? Or maybe the algebraic expression is interpreted from left to right? Do you know how does this look like in Ruby? Let&#39;s check it.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">6</span>
</code></pre></div>
<p>This is not 8. It is 6. You can see here that multiplication is <em>stronger</em> then addition. In this case we will say that multiplication has <strong>higher operator precedence</strong> then addition. This is exactly the same like we have learned at school on Math classes. To show you this more precisely, we have:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">6</span>

<span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">8</span>
</code></pre></div>
<p>OK, but how will I know that? There are many different operators. Well, you need to remember the table of operators order, from <a href="https://ruby-doc.org/core-2.2.0/doc/syntax/precedence_rdoc.html" title="Ruby documentation - operators precedence" target="_blank" rel="nofollow noopener noreferrer">Ruby docs</a>:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">!</span><span class="p">,</span> <span class="o">~</span><span class="p">,</span> <span class="n">unary</span> <span class="o">+</span>
<span class="o">**</span>
<span class="n">unary</span> <span class="o">-</span>
<span class="o">*</span><span class="p">,</span> <span class="sr">/, %</span>
<span class="sr">+, -</span>
<span class="sr">&lt;&lt;, &gt;&gt;</span>
<span class="sr">&amp;</span>
<span class="sr">|, ^</span>
<span class="sr">&gt;, &gt;=, &lt;, &lt;=</span>
<span class="sr">&lt;=&gt;, ==, ===, !=, =~, !~</span>
<span class="sr">&amp;&amp;</span>
<span class="sr">||</span>
<span class="sr">.., ...</span>
<span class="sr">?, :</span>
<span class="sr">modifier-rescue</span>
<span class="sr">=, +=, -=, etc.</span>
<span class="sr">defined?</span>
<span class="sr">not</span>
<span class="sr">or, and</span>
<span class="sr">modifier-if, modifier-unless, modifier-while, modifier-until</span>
<span class="sr">{ } blocks</span>
</code></pre></div>
<p>As you can see here <code>*</code> is higher than <code>+</code>, so it has <strong>higher precedence</strong>.</p>

<h2>Examples</h2>

<h3>Boolean operators</h3>

<p>Let&#39;s start with something simple. Precedence hierarchy for boolean operators.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">1</span> <span class="o">||</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="kp">nil</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>

<span class="mi">1</span> <span class="ow">or</span> <span class="mi">2</span> <span class="ow">and</span> <span class="kp">nil</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div>
<p>On the first look, logic is the same, but we get different results. But when you take a look closely, you will see the difference. Order of calculations. In the first example, the order looks like <code>(1 || (2 &amp;&amp; nil))</code>. We get <code>nil</code> from <code>2 &amp;&amp; nil</code>. And then we have <code>1 || nil</code> so this is <code>1</code>. Well, I lied a little bit here. Our interpreter is smarter, than you can think of. Because we have this <code>||</code> operator. It has been truthy always when left hand side is truthy, so it checks only the first part of our expression. Check here:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
 <span class="o">=&gt;</span> <span class="mi">0</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>

<span class="n">a</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
</code></pre></div>
<p>In the beginning, we assigned <code>0</code> to <code>a</code>. Then we check condition together with assignments. If we check also right hand side, we should get <code>2</code> assigned to <code>a</code> variable. But we get <code>1</code>. We get <code>2</code> only, when the left hand side is falsy. For example:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">a</span> <span class="o">=</span> <span class="kp">false</span> <span class="o">||</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>

<span class="n">a</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div>
<p>In the second example <code>1 or 2 and nil</code> order of operations is completely opposite: <code>((1 or 2) and nil)</code>. First,  we check <code>1 or 2</code>. We get <code>1</code> and then we check <code>1 and nil</code>, so the final result is <code>nil</code>.</p>

<p>To understand better the differences between these two notations, let&#39;s check all possibilities here in table:</p>

<table class='table'>
  <thead>
    <tr>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>a || b && c</th>
      <th>a or b and c</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
    </tr>
    <tr>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><code>true</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
    </tr>
    <tr>
      <td><code>false</code></td>
      <td><code>true</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
    </tr>
    <tr>
      <td><code>true</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><strong><code>true</code></strong></td>
      <td><strong><code>false</code></strong></td>
    </tr>
    <tr>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>false</code></td>
      <td><strong><code>true</code></strong></td>
      <td><strong><code>false</code></strong></td>
    </tr>
    <tr>
      <td><code>true</code></td>
      <td><code>false</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
    </tr>
    <tr>
      <td><code>false</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
    </tr>
    <tr>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
    </tr>
  </tbody>
</table>

<p>There are 2 cases, where you see the difference between operators <code>||</code> and <code>&amp;&amp;</code> and operators <code>or</code> and <code>and</code>.</p>

<h3>Assigments</h3>

<p>This example is related with boolean operators, but also with assignment:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>

<span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
</code></pre></div>
<p>Both of this logic expressions give us <code>2</code> as truthy result. But there is one difference here. In first case <code>foo</code> equals to <code>2</code> and in second example <code>foo</code> is <code>1</code>. This is related, of course, with operator precedence. Because <code>&amp;&amp;</code> has higher precedence than <code>=</code> in the first example we have:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">foo</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div>
<p>In second example,  order of those operations is different. <code>=</code> has higher precedence, then <code>and</code> so we have:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">(</span><span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="mi">2</span>
</code></pre></div>
<p>Similar behavior we will see for <code>||</code> and <code>or</code> operators. This will be visible only, when the first part of the expression will be <code>false</code> or <em>falsy</em> value. For truthy value, we will see no difference. Both expressions will behave the same:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># first part of condition is falsy</span>
<span class="n">foo</span> <span class="o">=</span> <span class="kp">false</span> <span class="o">||</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>

<span class="n">foo</span> <span class="o">=</span> <span class="kp">false</span> <span class="ow">or</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="kp">false</span>

<span class="c1"># first part of condition is truthy</span>
<span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">||</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>

<span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
</code></pre></div>
<p>I would like to explain, why we don&#39;t see any difference. For <code>foo = 1 || 2</code> we should set brackets like this <code>foo = (1 || 2)</code>. From logical condition <code>||</code>, we get <code>1</code> and we assign it to go<code>. In a second example</code>foo = 1 or 2`, first, we do the assignment and then we check the condition. The result is the same, but order of those operations is different. This is worth to be remembered!</p>

<p>In the end of this section, I would like to show you one more example. I think, it is a very interesting one. It is more complex because it uses  <code>=</code>, <code>&amp;&amp;</code>, <code>and</code> and <code>&lt;&lt;</code>.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;2&#39;</span>

<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;3&#39;</span>
 <span class="o">=&gt;</span> <span class="s2">&quot;23&quot;</span>

<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;2&#39;</span>

<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span> <span class="ow">and</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;3&#39;</span>
 <span class="o">=&gt;</span> <span class="s2">&quot;13&quot;</span>
</code></pre></div>
<p>Let&#39;s go step by step to understand, what is going on in here. In the first example we have <code>&amp;&amp;</code>. We know that, it has quite high precedence, but predecence for <code>&lt;&lt;</code> is higher, than <code>&amp;&amp;</code>. So the order of calculations here looks like: <code>s = (&#39;1&#39; &amp;&amp; (s &lt;&lt; &#39;3&#39;))</code>. First, we concat <code>&#39;3&#39;</code> to string. We get <code>s = (&#39;1&#39; &amp;&amp; &#39;23&#39;)</code>. Now we do <code>&amp;&amp;</code>, so the result is <code>&#39;23&#39;</code>.</p>

<p>In the second example we have order like <code>(s = &#39;1&#39;) and (s &lt;&lt; &#39;3&#39;)</code>. We start from assignments. So <code>s</code> is now <code>&#39;1&#39;</code> not <code>&#39;2&#39;</code>. Then we calculate right hand side part and we get <code>&#39;1&#39; and &#39;13&#39;</code>, so the final result is <code>&#39;13&#39;</code>.</p>

<h3>Methods &amp; boolean operators</h3>

<p>We still are in an area of boolean operators. This example will show you, how they behave with method calls without specifying brackets. As you know, in Ruby, you can omit brackets in some cases. But when you work with boolean at the same time, you need to be careful.</p>

<p>We declare our method and first example of usage:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># declare method</span>
<span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">&quot;My char id </span><span class="si">#{</span><span class="n">char</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>

<span class="c1"># example 1</span>
<span class="nb">method</span> <span class="s1">&#39;a&#39;</span> <span class="o">||</span> <span class="s1">&#39;b&#39;</span>
<span class="no">My</span> <span class="n">char</span> <span class="nb">id</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div>
<p>In this example, first operator <code>||</code> will be called. We will get <code>&#39;a&#39;</code> from it. This is why we see <code>&quot;My char id a&quot;</code> text. But because the method is displaying only the test and it doesn&#39;t return anything, we see <code>nil</code> value in the end. This is important, that our method always return <code>nil</code>. You will see why in the next examples. Order of operations was: <code>method(&#39;a&#39; || &#39;b&#39;)</code>.</p>

<p>Let&#39;s go to the next example:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># example 2</span>
<span class="nb">method</span> <span class="s1">&#39;a&#39;</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;b&#39;</span>
<span class="no">My</span> <span class="n">char</span> <span class="nb">id</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div>
<p>In the second example, the order is the same <code>method(&#39;a&#39; &amp;&amp; &#39;b&#39;)</code>. First, we do <code>&amp;&amp;</code> operation and we get <code>&#39;b&#39;</code> from it. Then we call our method. So this is why <code>&#39;b&#39;</code> is in our text.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># example 3</span>
<span class="nb">method</span> <span class="s1">&#39;a&#39;</span> <span class="ow">or</span> <span class="s1">&#39;b&#39;</span>
<span class="no">My</span> <span class="n">char</span> <span class="nb">id</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="s2">&quot;b&quot;</span>
</code></pre></div>
<p>In the example 3 you can notice a different behavior. As we already know, the order will be <code>method(&#39;a&#39;) or &#39;b&#39;</code>. This is why we see <code>&#39;a&#39;</code> in text, but then we need to finish this logical expression. Because our method return <code>nil</code> and this is <em>falsy</em> value, we have <code>nil or &#39;b&#39;</code>. In the end, we see <code>&#39;b&#39;</code> is returned, not from the method, but from all expression.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># example 4</span>
<span class="nb">method</span> <span class="s1">&#39;a&#39;</span> <span class="ow">and</span> <span class="s1">&#39;b&#39;</span>
<span class="no">My</span> <span class="n">char</span> <span class="nb">id</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div>
<p>For example number 4, the order of operation is the same like for example 3. We have <code>method(&#39;a&#39;) and &#39;b&#39;</code>. Text is <code>&quot;My char id a&quot;</code> because of a <code>&#39;a&#39;</code> argument in the method. Then function return <code>nil</code>, so we have <code>nil and &#39;b&#39;</code>. This is why we see one more time <code>nil</code> in the end.</p>

<p>OK, and now we will still stay in method calls context, but with different example. We declare two methods, one with no arguments and one with an argument.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">method1</span>
  <span class="nb">puts</span> <span class="s1">&#39;Call Method 1&#39;</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">method2</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">&quot;Call Method 2 with </span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>
</code></pre></div>
<p>Now we check, what will happen to <code>or</code> and <code>||</code> conditions.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">method1</span> <span class="ow">or</span> <span class="n">method2</span> <span class="s1">&#39;foo&#39;</span>
<span class="no">Call</span> <span class="no">Method</span> <span class="mi">1</span>
<span class="no">Call</span> <span class="no">Method</span> <span class="mi">2</span> <span class="n">with</span> <span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div>
<p>First example looks OK. We call <code>method1</code>, which display <code>&quot;Call Method 1&quot;</code> text and return <code>nil</code> (as we know from example above). Then, we call <code>method2</code> with one argument <code>&#39;foo&#39;</code>. We display text and return <code>nil</code>. Order of operations: <code>method1() or method2(&#39;foo&#39;)</code>. Everything is fine. Let&#39;s look at the second example.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">method1</span> <span class="o">||</span> <span class="n">method2</span> <span class="s1">&#39;foo&#39;</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/home/</span><span class="n">agnieszka</span><span class="o">/.</span><span class="n">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mi">2</span><span class="o">.</span><span class="mi">5</span><span class="o">.</span><span class="mi">3</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="ss">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;&#39;</span>
<span class="sb">SyntaxError ((irb):32: syntax error, unexpected tSTRING_BEG, expecting keyword_do or &#39;{&#39; or &#39;(&#39;)</span>
<span class="sb">method1 || method2 &#39;foo&#39;</span>
<span class="sb">                   ^</span>
</code></pre></div>
<p>Something went wrong. We got an error. This is because of precedence. Order of operations in this case is: <code>(method1 || method2) &#39;foo&#39;</code>. We can show it in a more descriptive way <code>(method1() || method2()) &#39;foo&#39;</code>. Our interpreter doesn&#39;t know what to do because of two reasons. One, <code>method2</code> should have one argument and it didn&#39;t get any. And the second one, more important, which we see in the error message. Interpreter see some <em>free</em> text <code>&#39;foo&#39;</code> without any operator in the same line with calling methods. To fix that, we need to say explicitly, what we want: <code>method1 || method2(&#39;foo&#39;)</code></p>

<p>The same problem you will get when instead of <code>method2</code> you will use <code>raise</code> or <code>return</code> or any other method. If you like, just play a little bit with them.</p>

<h3>Blocks</h3>

<p>Time for blocks. We need to be aware that <strong>blocks with <code>{}</code> have higher precedence than blocks <code>do ... end</code></strong>. This is not exactly specified in our order table, but in the documentation, you can find a small note about it. So, let&#39;s check this out. We will prepare two methods with blocks. In one we will call the block with <code>{}</code> and in the second with <code>do ... end</code>.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">&quot;Foo has block: </span><span class="si">#{</span><span class="nb">block_given?</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">&quot;Bar has block: </span><span class="si">#{</span><span class="nb">block_given?</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>

<span class="n">foo</span> <span class="ss">a</span><span class="p">:</span> <span class="n">bar</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">}</span>
<span class="no">Bar</span> <span class="n">has</span> <span class="ss">block</span><span class="p">:</span> <span class="kp">true</span>
<span class="no">Foo</span> <span class="n">has</span> <span class="ss">block</span><span class="p">:</span> <span class="kp">false</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">foo</span> <span class="ss">a</span><span class="p">:</span> <span class="n">bar</span> <span class="k">do</span> <span class="mi">1</span> <span class="k">end</span>
<span class="no">Bar</span> <span class="n">has</span> <span class="ss">block</span><span class="p">:</span> <span class="kp">false</span>
<span class="no">Foo</span> <span class="n">has</span> <span class="ss">block</span><span class="p">:</span> <span class="kp">true</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div>
<p>In the example one, the order is like here: <code>foo(a: (bar { 1 }))</code>. First, we will call <code>bar</code> method with a block. It will return <code>nil</code> and then we will call method <code>foo</code> with only hash parameter. It will look like this: <code>foo(a: nil)</code>. So, this is why we don&#39;t get a block in method <code>foo</code>.</p>

<p>In second example the order is different: <code>foo(a: bar) do 1 end</code>. It will be even better, to split it into separate lines.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">foo</span><span class="p">(</span><span class="ss">a</span><span class="p">:</span> <span class="n">bar</span><span class="p">)</span> <span class="k">do</span>
  <span class="mi">1</span>
<span class="k">end</span>
</code></pre></div>
<p>At first, we call method <code>bar</code>, but without any arguments and without a block. This is why we see this in the text: <code>&quot;Bar has block: false&quot;</code>. Then we call method <code>foo</code> with hash <code>{ a: nil }</code> as <code>options</code> and with block. We could even omit this hash parameter in the call of these two methods. It would be working the same. At least for displaying text on a screen. You can try to do that your own <code>foo bar { 1 }</code> and <code>foo bar do 1 end</code>.</p>

<h3>Other examples</h3>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">array</span> <span class="o">=</span> <span class="o">[]</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">array</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">3</span><span class="o">]</span>
</code></pre></div>
<p>This example behaves like we expect. First, we sum <code>a</code> and <code>b</code> and then we put value in the array. If you check in our precedence table <code>+</code> has higher precedence than <code>&lt;&lt;</code>.</p>

<p>In next example also everything will be all right. <code>+=</code> and <code>*=</code> has lower precedence than <code>+</code> and <code>*</code>. So you can omit brackets:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">multi</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">sum</span> <span class="o">+=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="mi">3</span>
<span class="n">sum</span>
 <span class="o">=&gt;</span> <span class="mi">3</span>

<span class="n">multi</span> <span class="o">*=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">multi</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div>
<p>Now precedence related to ranges. Because <code>+</code> and <code>-</code> has higher precedence than range, you can omit brackets here and everything will be fine:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">n</span> <span class="o">=</span> <span class="mi">9</span>
 <span class="o">=&gt;</span> <span class="mi">9</span>

<span class="mi">1</span><span class="o">.</span><span class="n">.n</span> <span class="o">-</span> <span class="mi">1</span>
 <span class="o">=&gt;</span> <span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">8</span>

<span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span>
 <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="o">]</span>
</code></pre></div>
<p>This is like doing <code>1..(n - 1)</code>.</p>

<h2>Summary</h2>

<ul>
<li>Be aware of operators precedence in Ruby.</li>
<li>If you are not sure about precedence, put the right brackets or even better: check in the documentation.Also do the tests ;]</li>
<li>Sometimes, even if I know precedences in Ruby, I like to leave brackets. It is more readable for me. Like here: <code>method(&#39;a&#39; &amp;&amp; &#39;b&#39;)</code>. I know that this notation <code>method &#39;a&#39; &amp;&amp; &#39;b&#39;</code> is correct and do exactly, what I want, but I like to be more specific here. This is more <strong>&quot;Tell, don&#39;t ask&quot;</strong> approach.</li>
</ul>

<p>That&#39;s it. If you have any other precedence examples, which were not mentioned here, feel free to share them in the comments. Thank you for reading and see you next time!</p>

                        <br>
                    
                    
                    <div class="entry-tags text-center">

                        <i class="icon-tags"></i>&nbsp;Tagged with <a href="https://womanonrails.com/tags/index.html#Ruby" data-toggle="tooltip" title="Posts tagged with Ruby" rel="tag">Ruby</a>

                    </div>
                    
                    </div>
        </div>
                    <footer class="post-footer entry-meta">
                        <div class="post-share text-center">
    <p class="light small">
        Share this post
    </p>
    <ul class="social-mini">
        <li>
            <a href="https://twitter.com/intent/tweet?text=&quot;Operator precedence in Ruby&quot;%20https://womanonrails.com/operator-precedence-ruby%20via%20&#64;womanonrails"
            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" data-toggle="tooltip" title="Share on Twitter" itemprop="Twitter">
                <i class="icon-twitter"></i>
            </a>
        </li>
        <li>
            <a  href="https://www.facebook.com/sharer/sharer.php?u=https://womanonrails.com/operator-precedence-ruby"
            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" data-toggle="tooltip" title="Share on Facebook" itemprop="Facebook">
                <i class="icon-facebook"></i>
            </a>
        </li>
        <li>
            <a href="https://plus.google.com/share?url=https://womanonrails.com/operator-precedence-ruby"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" data-toggle="tooltip" title="Share on Google plus" itemprop="GooglePlus">
                <i class="icon-google-plus"></i>
            </a>
        </li>
    </ul>
</div>
                        <div class="post-author text-center">
	        <img src="https://womanonrails.com/images/womanonrails.jpg" alt="Agnieszka Matysek's photo" itemprop="image" class="post-avatar img-circle img-responsive"/>
	    <h4 class="bordered-bottom vcard author" itemprop="author" itemscope itemtype="https://schema.org/Person">By <span itemprop="name" class="fn"><a href="https://womanonrails.com/about" title="About Agnieszka Matysek" itemprop="url">Agnieszka Matysek</a></span></h4>
	    <p>Woman, programmer, mentor, speaker, photographer and dancer with passion.</p>
</div>

                        <div id="disqus_thread"></div><!-- /#disqus_thread -->
                    </footer>
            </article>
    </div>
</div>
<footer id="footer"  class="blog-background overlay text-center align-middle animated from-top">

    <div class="inner">
        <div class="container">

            <ul class="social-icons">
            <li>
                <a href="https://twitter.com/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on Twitter" target="_blank" rel="noopener">
                    <i class="icon-twitter"></i>
                </a>
            </li>
            <li>
                <a href="https://facebook.com/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on Facebook" target="_blank" rel="noopener">
                    <i class="icon-facebook"></i>
                </a>
            </li>
            
            <li>
                <a href="https://stackoverflow.com/users/2885676/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on StackExchange" target="_blank" rel="noopener">
                    <i class="icon-stackexchange"></i>
                </a>
            </li>
            <li>
                <a href="https://linkedin.com/in/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on LinkedIn" target="_blank" rel="noopener">
                    <i class="icon-linkedin"></i>
                </a>
            </li>
            <li>
                <a href="https://instagram.com/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on Instagram" target="_blank" rel="noopener">
                    <i class="icon-instagram"></i>
                </a>
            </li>
            
            <li>
                <a href="https://github.com/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on Github" target="_blank" rel="noopener">
                    <i class="icon-github"></i>
                </a>
            </li>
        </ul>
            <div>
                
                <a href="https://womanonrails.com/about">Agnieszka Matysek</a> &copy; 2019 &bull; All rights reserved.
            </div>
            <ul class="menu-items">
            
            <li>
                
                    <a href="https://womanonrails.com/"><i class="icon-home"></i></a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="https://womanonrails.com/categories">Categories</a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="https://womanonrails.com/tags">Tags</a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="https://womanonrails.com/about">About</a>&nbsp;&bull;
                
            </li>
            
            <li><a href="https://womanonrails.com/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
        </ul>
        </div>
    </div>
    
        <div class="decor-wrapper">
            <svg id="footer-decor" class="decor top" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none">

                <path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path>
                <path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path>

                <path class="medium left" d="M0 0 L50 50 L0 66.6" fill="rgba(255,255,255, .3)"></path>
                <path class="medium right" d="M100 0 L50 50 L100 66.6" fill="rgba(255,255,255, .3)"></path>

                <path class="small left" d="M0 0 L50 50 L0 33.3" fill="rgba(255,255,255, .5)"></path>
                <path class="small right" d="M100 0 L50 50 L100 33.3" fill="rgba(255,255,255, .5)"></path>

                <path d="M0 0 L50 50 L100 0 L0 0" fill="rgba(255,255,255, 1)"></path>

                <path d="M48 48 L50 51 L52 48 L48 48" fill="rgba(255,255,255, 1)"></path>

            </svg>
        </div>
    
</footer>
<script>
  (function(h,o,t,j,a,r){
    h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
    h._hjSettings={hjid:157104,hjsv:5};
    a=o.getElementsByTagName('head')[0];
    r=o.createElement('script');r.async=1;
    r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
    a.appendChild(r);
  })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://womanonrails.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://womanonrails.com/assets/js/scripts.min.js"></script>
<script type="text/javascript" src="https://womanonrails.com/assets/js/waypoints.min.js"></script>
<script type="text/javascript" src="https://womanonrails.com/assets/js/script.js"></script>
<script type='text/javascript'>$(document).ready(function(){$(".time").text(function(a,b){return Math.round(parseFloat(b))})});</script>

<script type="text/javascript">

/*      Slides       */

$("a#slide").click(function(){
    $("#sidebar,body,a#slide,#fade").addClass("slide")
});

$("#fade,#header,#posts-container").click(function(){
    $("#sidebar,body,a#slide,#fade").removeClass("slide")
});

$("a#click-filter").click(function(){
    $("#slide-filter").slideToggle("medium");
    $("#slide-pages").slideOut("medium");
});

$("a#click-pages").click(function(){
    $("#slide-pages").slideToggle("medium");
    $("#slide-filter").slideOut("medium");
});

/*      End-Slides      */

</script>


<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : 'https://womanonrails.com/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {

     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };

    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });

      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-127731573-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-127731573-1');
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'womanonrails'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</body>
</html>
