<!DOCTYPE html>
<html lang="en">
<!--
====================================================
    __  ____  ______________  _______ ___    __
   / / / /  |/  / ____/   \ \/ / ___//   |  / /
  / /_/ / /|_/ / /_  / /| |\  /\__ \/ /| | / /
 / __  / /  / / __/ / ___ |/ /___/ / ___ |/ /___
/_/ /_/_/  /_/_/   /_/  |_/_//____/_/  |_/_____/

====================================================
Owner Name: Hossain Mohammad Faysal
Profile: https://www.facebook.com/hmfaysal
Version: 1.1
Description: Awesome dude, awesome life
====================================================
-->
<head>
<meta charset='utf-8'>
<title>Operator precedence in Ruby - Woman on Rails - web development from woman perspective</title>
<meta name="description" content="What do you need to know about order of mathematical operations and not only about them?">
<meta name="keywords" content="Ruby">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://womanonrails.com/images/womanonrails-square.svg">
<meta name="twitter:title" content="Operator precedence in Ruby">
<meta name="twitter:description" content="What do you need to know about order of mathematical operations and not only about them?">
<meta name="twitter:creator" content="@womanonrails">

<!-- Open Graph -->
<meta property="og:type" content="website">
<meta property="og:title" content="Operator precedence in Ruby">
<meta property="og:description" content="What do you need to know about order of mathematical operations and not only about them?">
<meta property="og:image" content="https://womanonrails.com/images/womanonrails-1000x1000.jpg">

<link rel='shortcut icon' href="https://womanonrails.com/favicon.ico">
<link rel='shortcut icon' href="https://womanonrails.com/favicon.png">





<link rel="canonical" href="https://womanonrails.com/operator-precedence-ruby">
<link href="https://womanonrails.com/feed.xml" type="application/atom+xml" rel="alternate" title="Woman on Rails Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Begin Jekyll SEO tag v2.6.0 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Operator precedence in Ruby" />
<meta name="author" content="womanonrails" />
<meta property="og:locale" content="en" />
<meta name="description" content="What do you need to know about order of mathematical operations and not only about them?" />
<meta property="og:description" content="What do you need to know about order of mathematical operations and not only about them?" />
<link rel="canonical" href="https://womanonrails.com/operator-precedence-ruby" />
<meta property="og:url" content="https://womanonrails.com/operator-precedence-ruby" />
<meta property="og:site_name" content="Woman on Rails" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-03-25T00:00:00-04:00" />
<script type="application/ld+json">
{"description":"What do you need to know about order of mathematical operations and not only about them?","headline":"Operator precedence in Ruby","dateModified":"2019-03-25T00:00:00-04:00","datePublished":"2019-03-25T00:00:00-04:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://womanonrails.com/operator-precedence-ruby"},"url":"https://womanonrails.com/operator-precedence-ruby","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://womanonrails.com/womanonrails-square.svg"},"name":"womanonrails"},"author":{"@type":"Person","name":"womanonrails"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


<link rel="stylesheet" type="text/css" href="https://womanonrails.com/assets/css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="https://womanonrails.com/assets/css/style.css" />
<link rel="stylesheet" href="/css/main.css">

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search...">
        <i class="icon-remove-sign"></i>
        <ul class="search-results post-list"></ul><!-- /.search-results -->
    </div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

</head>
<body class="post-template" itemscope itemtype="https://schema.org/WebPage">
<div id="fade"></div>
<a id="slide" class="animated fade"></a>
<aside id="sidebar">
  <nav id="navigation">
    <h2>MENU</h2>
    <hr>
    <ul>
      
        
          <li>
            
              <a href="https://womanonrails.com/">Home</a>
            
          </li>
        
          <li>
            
              <a href="https://womanonrails.com/categories">Categories</a>
            
          </li>
        
          <li>
            
              <a href="https://womanonrails.com/tags">Tags</a>
            
          </li>
        
          <li>
            
              <a href="https://womanonrails.com/about">About</a>
            
          </li>
        
      
      <li>
        <a href="https://womanonrails.com/feed.xml" title="Atom/RSS feed">
          <i class="icon-rss"></i> Feed
        </a>
      </li>
    </ul>
    </nav>
</aside>


<header id="masthead" class="blog-background overlay align-center align-middle animated from-bottom" itemscope itemtype="https://schema.org/Organization">


    <button class="menu-button animated fade dosearch" title="Search">
        <i class="icon-search"></i>
    </button>


  
  <a href="https://womanonrails.com/pl/operator-precedence-ruby" class='language animated fade'>
    pl
  </a>


    <div class="inner">
        <div class="container">
            
            <a class="brand" href="https://womanonrails.com/" role="banner" itemprop="url">
              
<img itemprop='logo' src="https://womanonrails.com/images/womanonrails-square.svg" alt="Woman on Rails Logo" width='120' />



            <h1 class="blog-title light" itemprop="name">
                Woman on Rails
            </h1>

            </a>
            <h2 class="blog-description light bordered bordered-top" itemprop="description">
                Premature optimization is the root of all evil.
            </h2>
        </div>
    </div>
    
    
    <div class="decor-wrapper">
        <svg id="header-decor" class="decor bottom" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path>
            <path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path>

            <path class="medium left" d="M0 100 L50 50 L0 33.3" fill="rgba(255,255,255, .3)"></path>
            <path class="medium right" d="M100 100 L50 50 L100 33.3" fill="rgba(255,255,255, .3)"></path>

            <path class="small left" d="M0 100 L50 50 L0 66.6" fill="rgba(255,255,255, .5)"></path>
            <path class="small right" d="M100 100 L50 50 L100 66.6" fill="rgba(255,255,255, .5)"></path>

            <path d="M0 99.9 L50 49.9 L100 99.9 L0 99.9" fill="rgba(255,255,255, 1)"></path>

            <path d="M48 52 L50 49 L52 52 L48 52" fill="rgba(255,255,255, 1)"></path>

        </svg>
    </div>
    
</header>

<div id="main" class="content" role="main" itemprop="mainContentOfPage" itemscope itemtype="https://schema.org/Blog">
    <div class="container">
        <div class="row">
            <article class="post col-md-8 col-md-offset-2 hentry" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
            
            
            
            
                    <header class="post-header entry-header">
                        
                        <h1 class="post-title text-center hyper lighter bordered-bottom entry-title" itemprop="headline">Operator precedence in Ruby</h1>
                        
                        <div class="cursive" style="color: #000; font-style:italic;">What do you need to know about order of mathematical operations and not only about them?</div>
                        <div class="post-info text-center small">
                            <span class="entry-date date published updated"><time datetime="2019-03-25T00:00:00-04:00" class="post-time" itemprop="datePublished">25 Mar 2019</time><span>
                            in <span class="post-tags"><a href="https://womanonrails.com/categories/index.html#programming" data-toggle="tooltip" title="Other posts from the Programming category" rel="tag">Programming</a></span>&nbsp;<span class="post-tags"><i class="icon-time"></i>&nbsp;<span class="time">11.29</span> minutes read</span>
                        </div>
                    </header>
                    <div class="post-body bordered-bottom" itemprop="description">
                        
                        <p>The order of math operations is very important in programming language. If you don’t know them well, you can get completely different results, than you expect. And your code can be just wrong. You need to know the rules. Is the order similar like in math? Or maybe the algebraic expression is interpreted from the left to the right? Do you know how does this look like in Ruby? Let’s check it.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">6</span>
</code></pre></div></div>

<p>This is not 8. It is 6. You can see here that multiplication is <em>stronger</em> then addition. In this case we will say that multiplication has <strong>higher operator precedence</strong> then addition. This is exactly the same like we have learned at school on Math classes. To show you this more precisely, we have:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
 <span class="o">=&gt;</span> <span class="mi">6</span>

<span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">8</span>
</code></pre></div></div>

<p>OK, but how will I know that? There are many different operators. Well, you need to remember the table of operators order, from <a href="https://ruby-doc.org/core-2.2.0/doc/syntax/precedence_rdoc.html" title="Ruby documentation - operators precedence" target="_blank" rel="nofollow noopener noreferrer">Ruby docs</a>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span><span class="p">,</span> <span class="o">~</span><span class="p">,</span> <span class="n">unary</span> <span class="o">+</span>
<span class="o">**</span>
<span class="n">unary</span> <span class="o">-</span>
<span class="o">*</span><span class="p">,</span> <span class="sr">/, %
+, -
&lt;&lt;, &gt;&gt;
&amp;
|, ^
&gt;, &gt;=, &lt;, &lt;=
&lt;=&gt;, ==, ===, !=, =~, !~
&amp;&amp;
||
.., ...
?, :
modifier-rescue
=, +=, -=, etc.
defined?
not
or, and
modifier-if, modifier-unless, modifier-while, modifier-until
{ } blocks
</span></code></pre></div></div>

<p>As you can see here <code class="highlighter-rouge">*</code> is higher than <code class="highlighter-rouge">+</code>, so it has <strong>higher precedence</strong>.</p>

<h2 id="examples">Examples</h2>

<h3 id="boolean-operators">Boolean operators</h3>

<p>Let’s start with something simple. Precedence hierarchy for boolean operators.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">1</span> <span class="o">||</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="kp">nil</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>

<span class="mi">1</span> <span class="n">or</span> <span class="mi">2</span> <span class="n">and</span> <span class="kp">nil</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div></div>

<p>On the first look, logic is the same, but we get different results. But when you take a look closely, you will see the difference. Order of calculations. In the first example, the order looks like <code class="highlighter-rouge">(1 || (2 &amp;&amp; nil))</code>. We get <code class="highlighter-rouge">nil</code> from <code class="highlighter-rouge">2 &amp;&amp; nil</code>. And then we have <code class="highlighter-rouge">1 || nil</code> so this is <code class="highlighter-rouge">1</code>. Well, I lied a little bit here. Our interpreter is smarter, than you can think of. Because we have this <code class="highlighter-rouge">||</code> operator. It has been truthy always when left hand side is truthy, so it checks only the first part of our expression. Check here:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
 <span class="o">=&gt;</span> <span class="mi">0</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>

<span class="n">a</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
</code></pre></div></div>

<p>In the beginning, we assigned <code class="highlighter-rouge">0</code> to <code class="highlighter-rouge">a</code>. Then we check condition together with assignments. If we check also right hand side, we should get <code class="highlighter-rouge">2</code> assigned to <code class="highlighter-rouge">a</code> variable. But we get <code class="highlighter-rouge">1</code>. We get <code class="highlighter-rouge">2</code> only, when the left hand side is falsy. For example:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="kp">false</span> <span class="o">||</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>

<span class="n">a</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div></div>

<p>In the second example <code class="highlighter-rouge">1 or 2 and nil</code> order of operations is completely opposite: <code class="highlighter-rouge">((1 or 2) and nil)</code>. First,  we check <code class="highlighter-rouge">1 or 2</code>. We get <code class="highlighter-rouge">1</code> and then we check <code class="highlighter-rouge">1 and nil</code>, so the final result is <code class="highlighter-rouge">nil</code>.</p>

<p>To understand better the differences between these two notations, let’s check all possibilities here in table:</p>

<table class="table">
  <thead>
    <tr>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>a || b &amp;&amp; c</th>
      <th>a or b and c</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
    </tr>
    <tr>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><code>true</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
    </tr>
    <tr>
      <td><code>false</code></td>
      <td><code>true</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
    </tr>
    <tr>
      <td><code>true</code></td>
      <td><code>false</code></td>
      <td><code>false</code></td>
      <td><strong><code>true</code></strong></td>
      <td><strong><code>false</code></strong></td>
    </tr>
    <tr>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>false</code></td>
      <td><strong><code>true</code></strong></td>
      <td><strong><code>false</code></strong></td>
    </tr>
    <tr>
      <td><code>true</code></td>
      <td><code>false</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
    </tr>
    <tr>
      <td><code>false</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
    </tr>
    <tr>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
      <td><code>true</code></td>
    </tr>
  </tbody>
</table>

<p>There are 2 cases, where you see the difference between operators <code class="highlighter-rouge">||</code> and <code class="highlighter-rouge">&amp;&amp;</code> and operators <code class="highlighter-rouge">or</code> and <code class="highlighter-rouge">and</code>.</p>

<h3 id="assigments">Assigments</h3>

<p>This example is related with boolean operators, but also with assignment:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>

<span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">and</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
</code></pre></div></div>

<p>Both of this logic expressions give us <code class="highlighter-rouge">2</code> as truthy result. But there is one difference here. In first case <code class="highlighter-rouge">foo</code> equals to <code class="highlighter-rouge">2</code> and in second example <code class="highlighter-rouge">foo</code> is <code class="highlighter-rouge">1</code>. This is related, of course, with operator precedence. Because <code class="highlighter-rouge">&amp;&amp;</code> has higher precedence than <code class="highlighter-rouge">=</code> in the first example we have:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">foo</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div></div>

<p>In second example,  order of those operations is different. <code class="highlighter-rouge">=</code> has higher precedence, then <code class="highlighter-rouge">and</code> so we have:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="n">and</span> <span class="mi">2</span>
</code></pre></div></div>

<p>Similar behavior we will see for <code class="highlighter-rouge">||</code> and <code class="highlighter-rouge">or</code> operators. This will be visible only, when the first part of the expression will be <code class="highlighter-rouge">false</code> or <em>falsy</em> value. For truthy value, we will see no difference. Both expressions will behave the same:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># first part of condition is falsy</span>
<span class="n">foo</span> <span class="o">=</span> <span class="kp">false</span> <span class="o">||</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>

<span class="n">foo</span> <span class="o">=</span> <span class="kp">false</span> <span class="n">or</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="kp">false</span>

<span class="c1"># first part of condition is truthy</span>
<span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">||</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>

<span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">or</span> <span class="mi">2</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="mi">1</span>
</code></pre></div></div>

<p>I would like to explain, why we don’t see any difference. For <code class="highlighter-rouge">foo = 1 || 2</code> we should set brackets like this <code class="highlighter-rouge">foo = (1 || 2)</code>. From logical condition <code class="highlighter-rouge">||</code>, we get <code class="highlighter-rouge">1</code> and we assign it to <code class="highlighter-rouge">foo</code>. In a second example <code class="highlighter-rouge">foo = 1 or 2</code>, first, we do the assignment and then we check the condition. The result is the same, but order of those operations is different. This is worth to be remembered!</p>

<p>In the end of this section, I would like to show you one more example. I think, it is a very interesting one. It is more complex because it uses  <code class="highlighter-rouge">=</code>, <code class="highlighter-rouge">&amp;&amp;</code>, <code class="highlighter-rouge">and</code> and <code class="highlighter-rouge">&lt;&lt;</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">s</span> <span class="o">=</span> <span class="s1">'2'</span>

<span class="n">s</span> <span class="o">=</span> <span class="s1">'1'</span> <span class="o">&amp;&amp;</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s1">'3'</span>
 <span class="o">=&gt;</span> <span class="s2">"23"</span>

<span class="n">s</span> <span class="o">=</span> <span class="s1">'2'</span>

<span class="n">s</span> <span class="o">=</span> <span class="s1">'1'</span> <span class="n">and</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s1">'3'</span>
 <span class="o">=&gt;</span> <span class="s2">"13"</span>
</code></pre></div></div>

<p>Let’s go step by step to understand, what is going on in here. In the first example we have <code class="highlighter-rouge">&amp;&amp;</code>. We know that, it has quite high precedence, but predecence for <code class="highlighter-rouge">&lt;&lt;</code> is higher, than <code class="highlighter-rouge">&amp;&amp;</code>. So the order of calculations here looks like: <code class="highlighter-rouge">s = ('1' &amp;&amp; (s &lt;&lt; '3'))</code>. First, we concat <code class="highlighter-rouge">'3'</code> to string. We get <code class="highlighter-rouge">s = ('1' &amp;&amp; '23')</code>. Now we do <code class="highlighter-rouge">&amp;&amp;</code>, so the result is <code class="highlighter-rouge">'23'</code>.</p>

<p>In the second example we have order like <code class="highlighter-rouge">(s = '1') and (s &lt;&lt; '3')</code>. We start from assignments. So <code class="highlighter-rouge">s</code> is now <code class="highlighter-rouge">'1'</code> not <code class="highlighter-rouge">'2'</code>. Then we calculate right hand side part and we get <code class="highlighter-rouge">'1' and '13'</code>, so the final result is <code class="highlighter-rouge">'13'</code>.</p>

<h3 id="methods--boolean-operators">Methods &amp; boolean operators</h3>

<p>We still are in an area of boolean operators. This example will show you, how they behave with method calls without specifying brackets. As you know, in Ruby, you can omit brackets in some cases. But when you work with boolean at the same time, you need to be careful.</p>

<p>We declare our method and first example of usage:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># declare method</span>
<span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"My char id </span><span class="si">#{</span><span class="n">char</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="c1"># example 1</span>
<span class="nb">method</span> <span class="s1">'a'</span> <span class="o">||</span> <span class="s1">'b'</span>
<span class="no">My</span> <span class="n">char</span> <span class="nb">id</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div></div>

<p>In this example, first operator <code class="highlighter-rouge">||</code> will be called. We will get <code class="highlighter-rouge">'a'</code> from it. This is why we see <code class="highlighter-rouge">"My char id a"</code> text. But because the method is displaying only the test and it doesn’t return anything, we see <code class="highlighter-rouge">nil</code> value in the end. This is important, that our method always return <code class="highlighter-rouge">nil</code>. You will see why in the next examples. Order of operations was: <code class="highlighter-rouge">method('a' || 'b')</code>.</p>

<p>Let’s go to the next example:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># example 2</span>
<span class="nb">method</span> <span class="s1">'a'</span> <span class="o">&amp;&amp;</span> <span class="s1">'b'</span>
<span class="no">My</span> <span class="n">char</span> <span class="nb">id</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div></div>

<p>In the second example, the order is the same <code class="highlighter-rouge">method('a' &amp;&amp; 'b')</code>. First, we do <code class="highlighter-rouge">&amp;&amp;</code> operation and we get <code class="highlighter-rouge">'b'</code> from it. Then we call our method. So this is why <code class="highlighter-rouge">'b'</code> is in our text.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># example 3</span>
<span class="nb">method</span> <span class="s1">'a'</span> <span class="n">or</span> <span class="s1">'b'</span>
<span class="no">My</span> <span class="n">char</span> <span class="nb">id</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="s2">"b"</span>
</code></pre></div></div>

<p>In the example 3 you can notice a different behavior. As we already know, the order will be <code class="highlighter-rouge">method('a') or 'b'</code>. This is why we see <code class="highlighter-rouge">'a'</code> in text, but then we need to finish this logical expression. Because our method return <code class="highlighter-rouge">nil</code> and this is <em>falsy</em> value, we have <code class="highlighter-rouge">nil or 'b'</code>. In the end, we see <code class="highlighter-rouge">'b'</code> is returned, not from the method, but from all expression.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># example 4</span>
<span class="nb">method</span> <span class="s1">'a'</span> <span class="n">and</span> <span class="s1">'b'</span>
<span class="no">My</span> <span class="n">char</span> <span class="nb">id</span> <span class="n">a</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div></div>

<p>For example number 4, the order of operation is the same like for example 3. We have <code class="highlighter-rouge">method('a') and 'b'</code>. Text is <code class="highlighter-rouge">"My char id a"</code> because of a <code class="highlighter-rouge">'a'</code> argument in the method. Then function return <code class="highlighter-rouge">nil</code>, so we have <code class="highlighter-rouge">nil and 'b'</code>. This is why we see one more time <code class="highlighter-rouge">nil</code> in the end.</p>

<p>OK, and now we will still stay in method calls context, but with different example. We declare two methods, one with no arguments and one with an argument.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">method1</span>
  <span class="nb">puts</span> <span class="s1">'Call Method 1'</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">method2</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Call Method 2 with </span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Now we check, what will happen to <code class="highlighter-rouge">or</code> and <code class="highlighter-rouge">||</code> conditions.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">method1</span> <span class="n">or</span> <span class="n">method2</span> <span class="s1">'foo'</span>
<span class="no">Call</span> <span class="no">Method</span> <span class="mi">1</span>
<span class="no">Call</span> <span class="no">Method</span> <span class="mi">2</span> <span class="n">with</span> <span class="n">foo</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div></div>

<p>First example looks OK. We call <code class="highlighter-rouge">method1</code>, which display <code class="highlighter-rouge">"Call Method 1"</code> text and return <code class="highlighter-rouge">nil</code> (as we know from example above). Then, we call <code class="highlighter-rouge">method2</code> with one argument <code class="highlighter-rouge">'foo'</code>. We display text and return <code class="highlighter-rouge">nil</code>. Order of operations: <code class="highlighter-rouge">method1() or method2('foo')</code>. Everything is fine. Let’s look at the second example.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">method1</span> <span class="o">||</span> <span class="n">method2</span> <span class="s1">'foo'</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/home/</span><span class="n">agnieszka</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">rubies</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">3</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
SyntaxError ((irb):32: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '(')
method1 || method2 'foo'
                   ^
</span></code></pre></div></div>

<p>Something went wrong. We got an error. This is because of precedence. Order of operations in this case is: <code class="highlighter-rouge">(method1 || method2) 'foo'</code>. We can show it in a more descriptive way <code class="highlighter-rouge">(method1() || method2()) 'foo'</code>. Our interpreter doesn’t know what to do because of two reasons. One, <code class="highlighter-rouge">method2</code> should have one argument and it didn’t get any. And the second one, more important, which we see in the error message. Interpreter see some <em>free</em> text <code class="highlighter-rouge">'foo'</code> without any operator in the same line with calling methods. To fix that, we need to say explicitly, what we want: <code class="highlighter-rouge">method1 || method2('foo')</code></p>

<p>The same problem you will get when instead of <code class="highlighter-rouge">method2</code> you will use <code class="highlighter-rouge">raise</code> or <code class="highlighter-rouge">return</code> or any other method. If you like, just play a little bit with them.</p>

<h3 id="blocks">Blocks</h3>

<p>Time for blocks. We need to be aware that <strong>blocks with <code class="highlighter-rouge">{}</code> have higher precedence than blocks <code class="highlighter-rouge">do ... end</code></strong>. This is not exactly specified in our order table, but in the documentation, you can find a small note about it. So, let’s check this out. We will prepare two methods with blocks. In one we will call the block with <code class="highlighter-rouge">{}</code> and in the second with <code class="highlighter-rouge">do ... end</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Foo has block: </span><span class="si">#{</span><span class="nb">block_given?</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Bar has block: </span><span class="si">#{</span><span class="nb">block_given?</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="n">foo</span> <span class="ss">a: </span><span class="n">bar</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">}</span>
<span class="no">Bar</span> <span class="n">has</span> <span class="ss">block: </span><span class="kp">true</span>
<span class="no">Foo</span> <span class="n">has</span> <span class="ss">block: </span><span class="kp">false</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>

<span class="n">foo</span> <span class="ss">a: </span><span class="n">bar</span> <span class="k">do</span> <span class="mi">1</span> <span class="k">end</span>
<span class="no">Bar</span> <span class="n">has</span> <span class="ss">block: </span><span class="kp">false</span>
<span class="no">Foo</span> <span class="n">has</span> <span class="ss">block: </span><span class="kp">true</span>
 <span class="o">=&gt;</span> <span class="kp">nil</span>
</code></pre></div></div>

<p>In the example one, the order is like here: <code class="highlighter-rouge">foo(a: (bar { 1 }))</code>. First, we will call <code class="highlighter-rouge">bar</code> method with a block. It will return <code class="highlighter-rouge">nil</code> and then we will call method <code class="highlighter-rouge">foo</code> with only hash parameter. It will look like this: <code class="highlighter-rouge">foo(a: nil)</code>. So, this is why we don’t get a block in method <code class="highlighter-rouge">foo</code>.</p>

<p>In second example the order is different: <code class="highlighter-rouge">foo(a: bar) do 1 end</code>. It will be even better, to split it into separate lines.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">foo</span><span class="p">(</span><span class="ss">a: </span><span class="n">bar</span><span class="p">)</span> <span class="k">do</span>
  <span class="mi">1</span>
<span class="k">end</span>
</code></pre></div></div>

<p>At first, we call method <code class="highlighter-rouge">bar</code>, but without any arguments and without a block. This is why we see this in the text: <code class="highlighter-rouge">"Bar has block: false"</code>. Then we call method <code class="highlighter-rouge">foo</code> with hash <code class="highlighter-rouge">{ a: nil }</code> as <code class="highlighter-rouge">options</code> and with block. We could even omit this hash parameter in the call of these two methods. It would be working the same. At least for displaying text on a screen. You can try to do that your own <code class="highlighter-rouge">foo bar { 1 }</code> and <code class="highlighter-rouge">foo bar do 1 end</code>.</p>

<h3 id="other-examples">Other examples</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">array</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">array</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>

<p>This example behaves like we expect. First, we sum <code class="highlighter-rouge">a</code> and <code class="highlighter-rouge">b</code> and then we put value in the array. If you check in our precedence table <code class="highlighter-rouge">+</code> has higher precedence than <code class="highlighter-rouge">&lt;&lt;</code>.</p>

<p>In next example also everything will be all right. <code class="highlighter-rouge">+=</code> and <code class="highlighter-rouge">*=</code> has lower precedence than <code class="highlighter-rouge">+</code> and <code class="highlighter-rouge">*</code>. So you can omit brackets:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">multi</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">sum</span> <span class="o">+=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="mi">3</span>
<span class="n">sum</span>
 <span class="o">=&gt;</span> <span class="mi">3</span>

<span class="n">multi</span> <span class="o">*=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="n">multi</span>
 <span class="o">=&gt;</span> <span class="mi">2</span>
</code></pre></div></div>

<p>Now precedence related to ranges. Because <code class="highlighter-rouge">+</code> and <code class="highlighter-rouge">-</code> has higher precedence than range, you can omit brackets here and everything will be fine:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">n</span> <span class="o">=</span> <span class="mi">9</span>
 <span class="o">=&gt;</span> <span class="mi">9</span>

<span class="mi">1</span><span class="o">..</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span>
 <span class="o">=&gt;</span> <span class="mi">1</span><span class="o">..</span><span class="mi">8</span>

<span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">).</span><span class="nf">to_a</span>
 <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</code></pre></div></div>

<p>This is like doing <code class="highlighter-rouge">1..(n - 1)</code>.</p>

<h2 id="summary">Summary</h2>

<ul>
  <li>Be aware of operators precedence in Ruby.</li>
  <li>If you are not sure about precedence, put the right brackets or even better: check in the documentation.Also do the tests ;]</li>
  <li>Sometimes, even if I know precedences in Ruby, I like to leave brackets. It is more readable for me. Like here: <code class="highlighter-rouge">method('a' &amp;&amp; 'b')</code>. I know that this notation <code class="highlighter-rouge">method 'a' &amp;&amp; 'b'</code> is correct and do exactly, what I want, but I like to be more specific here. This is more <strong>“Tell, don’t ask”</strong> approach.</li>
</ul>

<p>That’s it. If you have any other precedence examples, which were not mentioned here, feel free to share them in the comments. Thank you for reading and see you next time!</p>

                        <br>
                    
                    
                    <div class="entry-tags text-center">

                        <i class="icon-tags"></i>&nbsp;Tagged with <a href="https://womanonrails.com/tags/index.html#Ruby" data-toggle="tooltip" title="Posts tagged with Ruby" rel="tag">Ruby</a>

                    </div>
                    
                    </div>
        </div>
                    <footer class="post-footer entry-meta">
                        <div class="post-share text-center">
    <p class="light small">
        Share this post
    </p>
    <ul class="social-mini">
        <li>
            <a href="https://twitter.com/intent/tweet?text=&quot;Operator precedence in Ruby&quot;%20https://womanonrails.com/operator-precedence-ruby%20via%20&#64;womanonrails"
            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" data-toggle="tooltip" title="Share on Twitter" itemprop="Twitter">
                <i class="icon-twitter"></i>
            </a>
        </li>
        <li>
            <a  href="https://www.facebook.com/sharer/sharer.php?u=https://womanonrails.com/operator-precedence-ruby"
            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" data-toggle="tooltip" title="Share on Facebook" itemprop="Facebook">
                <i class="icon-facebook"></i>
            </a>
        </li>
        <li>
            <a href="https://plus.google.com/share?url=https://womanonrails.com/operator-precedence-ruby"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" data-toggle="tooltip" title="Share on Google plus" itemprop="GooglePlus">
                <i class="icon-google-plus"></i>
            </a>
        </li>
    </ul>
</div>
                        <div class="post-author text-center">
	        <img src="https://womanonrails.com/images/womanonrails-square.svg" alt="Agnieszka Matysek's photo" itemprop="image" class="post-avatar img-circle img-responsive"/>
	    <h4 class="bordered-bottom vcard author" itemprop="author" itemscope itemtype="https://schema.org/Person">By <span itemprop="name" class="fn"><a href="https://womanonrails.com/about" title="About Agnieszka Matysek" itemprop="url">Agnieszka Matysek</a></span></h4>
	    <p>Woman, programmer, mentor, speaker, photographer and dancer with passion.</p>
</div>

                        <div id="disqus_thread"></div><!-- /#disqus_thread -->
                    </footer>
            </article>
    </div>
</div>
<footer id="footer"  class="blog-background overlay text-center align-middle animated from-top">

    <div class="inner">
        <div class="container">

            <ul class="social-icons">
            <li>
                <a href="https://twitter.com/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on Twitter" target="_blank" rel="noopener">
                    <i class="icon-twitter"></i>
                </a>
            </li>
            <li>
                <a href="https://facebook.com/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on Facebook" target="_blank" rel="noopener">
                    <i class="icon-facebook"></i>
                </a>
            </li>
            <li>
                <a href="https://stackoverflow.com/users/2885676/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on StackExchange" target="_blank" rel="noopener">
                    <i class="icon-stackexchange"></i>
                </a>
            </li>
            <li>
                <a href="https://linkedin.com/in/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on LinkedIn" target="_blank" rel="noopener">
                    <i class="icon-linkedin"></i>
                </a>
            </li>
            <li>
                <a href="https://instagram.com/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on Instagram" target="_blank" rel="noopener">
                    <i class="icon-instagram"></i>
                </a>
            </li>
            
            <li>
                <a href="https://github.com/womanonrails" data-toggle="tooltip" title="Agnieszka Matysek on Github" target="_blank" rel="noopener">
                    <i class="icon-github"></i>
                </a>
            </li>
        </ul>
            <div>
              <a href="/about">Agnieszka Matysek</a>
              &copy; 2019
              &bull; All rights reserved.
            </div>
            <ul class="menu-items">
            
            <li>
                
                    <a href="https://womanonrails.com/"><i class="icon-home"></i></a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="https://womanonrails.com/categories">Categories</a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="https://womanonrails.com/tags">Tags</a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="https://womanonrails.com/about">About</a>&nbsp;&bull;
                
            </li>
            
            <li><a href="https://womanonrails.com/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
        </ul>
        </div>
    </div>
    
        <div class="decor-wrapper">
            <svg id="footer-decor" class="decor top" xmlns="https://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none">

                <path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path>
                <path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path>

                <path class="medium left" d="M0 0 L50 50 L0 66.6" fill="rgba(255,255,255, .3)"></path>
                <path class="medium right" d="M100 0 L50 50 L100 66.6" fill="rgba(255,255,255, .3)"></path>

                <path class="small left" d="M0 0 L50 50 L0 33.3" fill="rgba(255,255,255, .5)"></path>
                <path class="small right" d="M100 0 L50 50 L100 33.3" fill="rgba(255,255,255, .5)"></path>

                <path d="M0 0 L50 50 L100 0 L0 0" fill="rgba(255,255,255, 1)"></path>

                <path d="M48 48 L50 51 L52 48 L48 48" fill="rgba(255,255,255, 1)"></path>

            </svg>
        </div>
    
</footer>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://womanonrails.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://womanonrails.com/assets/js/scripts.min.js"></script>
<script type="text/javascript" src="https://womanonrails.com/assets/js/waypoints.min.js"></script>
<script type="text/javascript" src="https://womanonrails.com/assets/js/script.js"></script>
<script type='text/javascript'>$(document).ready(function(){$(".time").text(function(a,b){return Math.round(parseFloat(b))})});</script>

<script type="text/javascript">

/*      Slides       */

$("a#slide").click(function(){
    $("#sidebar,body,a#slide,#fade").addClass("slide")
});

$("#fade,#header,#posts-container").click(function(){
    $("#sidebar,body,a#slide,#fade").removeClass("slide")
});

$("a#click-filter").click(function(){
    $("#slide-filter").slideToggle("medium");
    $("#slide-pages").slideOut("medium");
});

$("a#click-pages").click(function(){
    $("#slide-pages").slideToggle("medium");
    $("#slide-filter").slideOut("medium");
});

/*      End-Slides      */

</script>


<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : 'https://womanonrails.com/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {

     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };

    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });

      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-127731573-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-127731573-1');
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'womanonrails'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</body>
</html>
